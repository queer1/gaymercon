$(document).ready(function(){
  
  require(["<%= asset_path "libs/twitter.js" %>", 
           "<%= asset_path "libs/gplus.js" %>",
           "<%= asset_path "libs/fb.js" %>", 
           "<%= asset_path "libs/uservoice.js" %>",
           "<%= asset_path "jquery.tweet.js" %>"], function(util){
             $('.tweet').tweet({
               avatar_size: 32,
               count: 3,
               fetch: 20,
               filter: function(t){ return ! /^@\w+/.test(t.tweet_raw_text); },
               username: "gaymercon"
             });
           });
  
  elem = $('<input type="hidden" name="antispam" value="gaymercon" />')
  $('#email').after(elem)
  
  $("head").append("<link href='http://fonts.googleapis.com/css?family=VT323|Press+Start+2P' rel='stylesheet' type='text/css'>");
  
  $("#info-links").hover(function(){
    $("ul", this).show();
  }, function(){
    $("ul", this).hide();
  })
  
  $("#connect-links").hover(function(){
    $("ul", this).show();
  }, function(){
    $("ul", this).hide();
  })
  
  if($('.nav-tabs').length > 0){
    $('.nav-tabs').on("click", "li", function(){
      var fs = $(this).find('a').first().attr("href");
      $('.nav-tabs li').removeClass('active');
      $(this).addClass('active')
      $.each($('.nav-tabs a'), function(){ $($(this).attr('href')).hide(); });
      $(".edit-form").hide();
      $(fs).show();
      return false;
    });
  }
  
  $.each($(".level-bar"), function(){
    $(this).progressbar({ value: $(this).data('progress') });
  });
  
  $("textarea.bbcode").bbcode();
  
  $("a.toggle").on("click", function(e){
    e.preventDefault();
    var target = $(this).attr('href')
    $(target).slideToggle('fast');
    return false;
  });
  
  $('.get-location').on("click", function(e){
    e.preventDefault();
    var link = $(this);
    $.get("/info/get_location", {}, function(data, status, xhr){
      if(data["location"])
        link.siblings('.place:first').val(data["location"]);
    });
    return false;
  });
  
  $(".date").datepicker();
})