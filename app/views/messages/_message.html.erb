<% unread = message.from_user != current_user && message.read? == false %>

<li class="message <%= unread ? 'unread' : '' %>">
  <% if message.from_user == current_user %>
    <%= link_to message.content.truncate(100), edit_message_path(message) %>
  <% else %>
    <%= link_to message.content.truncate(100), message_path(message) %>
  <% end %>
  <br />
  <small>
    <% if message.from_user == current_user %>
      Sent to <%= link_to message.to_user.name, user_path(message.to_user) %>
    <% else %>
      Sent by <%= link_to message.from_user.name, user_path(message.from_user) %> 
    <% end %>
    on <%= message.created_at.strftime("%b %-d, %Y" ) %>
    
    <% if message.from_user == current_user %>
      <%= link_to "Delete", message_path(message.id), method: "delete", confirm: "Are you sure? #{message.to_user.name} might have already seen it." %>
    <% end %>
  </small>
</li>
